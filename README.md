









# 设备管理平台平台常见问题

## 物联网设备无法上网问题查找

- 如果是UBOX设备该方案需要使用电脑（<a href="#投屏系统设置">物联网屏请直接跳转到第二步</a>），将电脑和Ubox通过网线直连连接。通过电脑查询物联网设备运行情况，对解决问题提供参考。

  ### 查看流量卡状态是否是正常的状态

  - 停机状态，请及时充值<font color=red size=5>（流量卡插到设备上后，尽量不要换设备，换设备会导致流量卡锁卡，锁卡会状态会变成停机用不了，请联系技术支持）</font>

  ![img61](img61.png)

  ### 设备连接

  ①右键点击Uniface快捷方式，选择文件所在位置。或者自己进入安装根目录。

  ②选择tvnviewer.exe运行。

  ③在IP 输入设备的实际IP（保证电脑IPV4与设备IP在同一网段内），然后点击connect连接设备。

  ![img_3](img_3.png)

  ![img_4](img_4.png)

  ### <a name="投屏系统设置" style="text-decoration: none;">打开设备命令</a>

①进入设备界面，与HMI操作相同。

②先长按左上角也就是①部位5秒。会弹出属性设置界面。选择系统设置。进入系统设置界面。选择网络模式选择界面，点击画面圈出的小箭头，进入配置网络设置界面。

![img_5](img_5.png)

![img_6](img_6.png)

### 命令执行

进入检测界面，可在①处选择各种命令，选择后点击②命令，点击命令后会有短时卡顿情况，是设备正在执行命令的正常情况。

![img_7](img_7.png)

### 建议检测及问题分析

- 如果是4G上网模式：

① 在网络选择模式的画面中，确认网络模式是正确的和选择的服务器是主服务器；<font color=red size=3>(如要修改，重启后生效)</font>

![img41.jpg](img41.jpg)

② 选择4G网卡驱动。如果显示如下表示正常，如果不是请联系技术重新安装4G模组，或者换新。

![img42](img42.png)

③选择查询SIM卡卡号。如果显示一串文字以及OK表示识别4G卡，如果是显示ERROR表示没有识别到4G卡，这时请检查4G卡是非安装到位<font color=red size=3>(尝试设备断电后，重插卡，再重新给设备上电）</font>。

![img43.png](img43.png)

④ 选择4G信号强度。范围+CSQ 9，99~31，99 。逗号前表示信号，31表示信号最好，0表示没有信号，信号强度10以下上不了线，15以下可能会出现频繁上下线。请确保信号良好

![img44.png](img44.png)

⑤选择ping服务器。设备如果能ping通说明设备上网没有问题，可以尝试修改设备的DNS，改成114.114.114.114，改完之后重启看下。如果ping不通服务器，在确保前边①-④都正常，设备有可能出现问是某一进程没启动，请联系技术支持或者研发。

![img_12](img_12.png)

![img_13](img_13.png)



![image-20221009142008740](img45.png)

- 如果是有线上网方式：

①请确保设备连接的网络中没有IP冲突，可以启用动态主机配置来避免这个问题。

![img46.png](img46.png)

②检查设备的子网掩码和路由器的子网掩码是否一致，IP的网段和路由器的网段是否一致

![image-20221009152707327](image-20221009152707327.png)

③确保路由器的设置，没有设置防火墙、不能访问某些端口或者限制某些IP不能上网

<font color=red size=3>Ps :如果上述方法都尝试过，还是不行请联系技术支持</font>

## 我拿到新设备不上线？

①先上电后绑定设备，需要在绑定后设备重新上电。

②有线上网模式，请确保设备连接的网络中没有IP冲突，可以启用动态主机配置来避免这个问题。

![img46.png](img46.png)

③4G模式，请确保天线安装到位，不能把天线放到铁箱内或者其他对信号有较强屏蔽效果的地方。

④确保自己网络模式选择是正确的。

## 为什么我添加了通信配置设备一直报错？

- ①使用Uniface组态工程时，通信连接名称要与Anyaccess的通信配置连接名称相同。
- 检查通信配置的参数，如串口通讯的站号、波特率、Ubox使用路由器模式注意两个网口不要在同一个网段内。

## <a name="透传不成功" style="text-decoration: none;">我为什么开启透传不成功？</a>

- 透传需要启动虚拟网卡，可以在“网络和Internet > 网络连接”中查看是否有名字为“TAP-Windows Adapter V9”的网卡。

- 如果有多个可能是之前用过其他家的设备，请先禁用其他的虚拟网卡只保留一个。

- 在国外使用的设备，cmd ping一下当前使用的服务器，是不是延迟超过了400ms。参考设备<a href="#海外使用">可以在海外使用吗？</a>

- 如果一个都没有可以到anyaccess的安装目录下找到“iphenlper”使用管理权限运行就可自动安装。若是不成功那需要手动安装，可以参考百度经验。Win10系统如何安装虚拟网卡，连接如下。Win7与Win10方法相同。
  https://jingyan.baidu.com/article/ce4366495d3ff43773afd3f5.html

  虚拟网卡驱动安装包：

   [TAP-Window Adapter V9 64bit.zip](G:\软件工具\TAP-Windows Adapter V9\TAP-Window Adapter V9 64bit.zip)    32位

   [TAP-Win32 Adapter V9 32bit.rar](G:\软件工具\TAP-Windows Adapter V9\TAP-Win32 Adapter V9 32bit.rar)       64位

## 我开启网口透传后，跟PLC通信不上？

①按下快捷键“win+r”打开运行，输入CMD命令， ping一下物联网设备的IP或虚拟IP，如果不通可能是虚拟网卡的问题，解决方法参考<a href="#透传不成功">“我为什么开启透传不成功？”</a>。

②物联网设备的IP能ping通，那就是物联网设备与PLC连接上有问题。先确认PLC的IP在物联网构成的局域网内是否冲突（常见于PLC与物联网设备通过交换机连接，同时交换机接入有多个网络设备），PLC是否和物联网设备在一个网段内，PLC的IP地址不能是特殊地址0、1、255，这些特殊地址在广域网中有特殊作用，区别与之前工业局域网的使用情况。以上都没问题就需要检测现场网线是否没有插好，网线是否有损伤。

## 为什么我开启串口透传后，跟PLC通信不上？

①按下快捷键“win+r”打开运行，输入CMD命令，接着输入tasklist命令看下有没有com2tcp的进程，如果没有检查下anyaccess是不是在中文目录下（anyaccess不能在中文目录，可以迁移到英文目录下） 

 ②检查下电脑的设备管理器-端口，是否有虚拟串口对，默认串口对：USOFTPLC<-->comx

③检查下有没有打开杀毒软件，有的杀毒软件会自动删除某些文件，影响透传，建议关闭

⑤检查anyaccess文件所在位置\softwares\com2tcp，里面的文件是否有缺失 ，下图是参考图片，如果有缺失文件的话，建议关闭杀毒软件后重装anyaccess  

![img_14](img_14.png)

④按下快捷键Win+R ,输入cmd命令，ping 虚拟IP看是否能ping通，如果不通可能是虚拟网卡的问题，解决方法参考<a href="#透传不成功">“我为什么开启透传不成功？”</a>。

## 物联网设备和PLC连接好之后，为什么收不到PLC的数据

①投屏看下屏的画面有没有报错，如果有报错。检查下通讯配置，网口的PLC检查下IP和端口号是否正确；串口连接的PLC，检查下参数设置如站号、波特率或者校验位

②检查下线的连接，有没有查紧，线是否能正常通讯

③网口连接的PLC，检查下物联网设备的IP网段和PLC的IP网段是否一致

④smart PLC 如果开了modbus协议，网口就读不到数据，这个型号的PLC 串口只能走一个协议

⑤如果使用的是西门子1200-1500的协议，请检查下图的两个设置，新建的DB数据块属性，默认的优化的块访问勾选去掉；点击工程邮件属性==>选择保护==>连接机制==>勾选来自允许远程对象的通信

![img47](img47.jpg)

![img48](img48.png)

## 报警推送要怎么用<font color=red size=3>（收不到报警推送，可按照一下步骤排查）</font>

<a name="微信推送_1" style="text-decoration: none;" >①关注公众号，手机打开微信扫码并关注公众号</a>

![img_15](img_15.png)

②绑定微信，二维码要扫两遍，微信提示绑定成功，则已成功绑定微信，如下图。（一个anyaccess账号只能绑定一个微信号；一个设备一天只能推送一百条，第二天凌晨重置微信条数）

<img src="G:/操作视频/帮助文档/设备管理平台/img_16.png" alt="img_16" style="zoom:65%;"  align=right /><img src="G:/操作视频/帮助文档/设备管理平台/img49.png" alt="img49.jpg" style="zoom:65%;"  align=left />

























③配置报警消息推送，想要微信推送方式，则勾选微信；电话和短信推送需要开通条数，才可以使用

![img_17](img_17.png)

④勾选报警数据推送

![img_18](img_18.png)

<a name="微信推送_5" style="text-decoration: none;" >⑤创建消息推送人及配置推送内容</a>

![img_19](img_19.png)

![img_20](img_20.png)

## 我怎么让我的客户也能收到，物联网设备的报警微信推送消息

- 一个anyaccess只能绑定一个微信号，所以需要您的客户也注册一个anyaccess账号，操作绑定微信和关注公众号，参考<a href="#微信推送_1">”报警推送要怎么用？“</a>操作第1、2步；再登录您自己的账号，参考<a href="#微信推送_5">”报警推送要怎么用？“</a>操作第5步。（第5步的添加消息联系人，手机号添加您客户注册AnyAccess的手机号）

## <a name="海外使用">物联网设备，可以在海外使用吗？</a>

- 可以，用当地的网络和电脑，cmd 然后ping　47.242.12.83或者39.97.161.40 IP看延迟，大于400不能透传，大于600不能使用（anyaccess打开会非常卡），如果国内服务器延迟不是很大，可以直接使用；如果国内服务器延迟很大，但是海外服务器延迟还好，需要在uniface里面配置网关设置；anyaccess的服务器也需要修改为香港服务器，改完之后需要重启anyaccess软件,如下图（用海外服务器的话，需要跟管理员联系并提供设备SN号和密码）</font>

  

  ![img63](img63.png)

  ![img_25](img_25.png)

  ![img62](img62.png)

## 怎么修改物联网设备IP？

- 本地修改IP：

①通过uniface修改IP，打开网络配置，然后把需要修改的IP填写上去，确定后下载

![img_26](img_26.png)

②打开anyaccess==>本地通讯==>不同的设备信号选择不同的类型==>开始，选择本地网卡后点击扫描==>选择设备==>配置==>刷新==>修改IP后==>点击设置后，重启设备生效

![img_27](img_27.png)

![img_28](img_28.png)

![img_29](img_29.png)

- 远程修改IP（设备上线后修改IP）：

①通讯配置==>远程下载==>开启透传==>投屏==>长按左上角==>弹出属性设置页面后==>系统设置==>IP地址==>设置IP信息==>点击设置，设备重启后生效

![img_30](img_30.png)

![img_31](img_31.png)

②适用于设备版本号大于4.007.210901，2.0固件的设备，全局设置==>远程通讯==>选择设备后点击查询==>进入Ethernet，修改IP后点击确定==>重启设备后生效

![img_32](img_32.png)

## 开启透传，点击投屏后电脑蓝屏

- 进入设备管理器==>卸载掉之前的虚拟网卡驱动==>添加过时硬件==>手动安装==>选择网络适配器==>选择虚拟网卡驱动文件==>点击安装

  虚拟网卡驱动安装包：

   [TAP-Window Adapter V9 64bit.zip](G:\软件工具\TAP-Windows Adapter V9\TAP-Window Adapter V9 64bit.zip)    32位

   [TAP-Win32 Adapter V9 32bit.rar](G:\软件工具\TAP-Windows Adapter V9\TAP-Win32 Adapter V9 32bit.rar)       64位

![V9](V9.gif)

## anyaccess打开显示空白

​           <img src="G:/操作视频/帮助文档/设备管理平台/img64.png" alt="img64" style="zoom:50%;" />

①检查电脑时间是否正确，如果与实际时间不同步，请同步一下电脑时间。https://jingyan.baidu.com/article/59a015e34dcf72b69588656c.html

②检查电脑网络是否正常，浏览器是否能正常打开网页https://www.gongyeyuniot.com/dev/login。如果连网页都打不开，请切换一个网络重新试试

③检查电脑是否安装了杀毒软件，把杀毒软件关掉后，重试一下。还是不行重装试试，杀毒软件可能杀掉了某些文件导致打不开

## 绑定流量卡，提示“获取流量资源失败”

①绑定流量卡，输入卡号只用输入前20位

<img src="G:/操作视频/帮助文档/设备管理平台/img65.jpg" alt="img65.jpg" style="zoom:50%;" />

②流量卡已销户（流量卡停机三个月后，会自动销户；可以把流量卡号反馈给销售或者技术支持，看流量卡是否是销户状态）

③流量卡是自购的，不是我们公司的流量卡；自购流量卡无法在我们平台进行绑定

## 1.0到2.0升级指导

### 数据转移

<font color=red size=3>注意2.0设备只能在二级域名上使用。</font>
从1.0设备升级到2.0设备第一步需要将配置的实时数据、历史数据以及报警数据，转移。为了减少这一步的工作量方便客户使用。增加数据导出这一新功能。由Uniface有数据导出，和 Anyaccess上的配置上传。共同完成。

①升级准备

初次升级需要现在官网下载Uniface。下图仅代表编写当时软件所在位置，若软件位置和文档不同也属正常。

下载后安装。使用刚下载的软件打开原来的工程文件。会弹出兼容提示，点击确定即可。

![img50](img50.png)

②补充：关于硬件同步升级

​      如果您是新买的设备则无需关注这部分。

​      本部分主要针对老旧设备升级，需要刷新固件情况。21年上半年及其之前的设备绝大部是1.0的老设备。若不确定也可以寻找当地技术支持协助判断。

​      升级到2.0，勾选切换IOT，下载的时候会有切换提示框，选择2.0即可。如果没有2.0就点击取消

![img51](img51.png)

请尽快选择，页面长期停留会下载超时，如果出现超时的情况，重新下载即可

![img52](img52.png)

③Uniface数据导出

![img53](img53.png)

④Anyaccess配置上传

- 导出文件是json结尾文件。

<font color=red size=3>注：不要修改文件的格式，仅支持json格式。</font>

<font color=red size=3>1.0设备不支持配置上传，若设备是1.0请在设备升级到2.0完成后进行配置上传操作。</font>

![img54](img54.png)

### 平台设置

- 设备升级后二级域名的虚拟设备以及模板都需要升级修改。

①虚拟设备

- 升级后二级域名的虚拟设备中会显示异常，需要点击修复。登录二级域名==>设备中心==>虚拟设备==>点击设备后的修复

<font color=red size=3>注：若点击修复无反应，可以点击删除然后重新添加虚拟设备。</font>

​       <font color=red size=3>运用非标模板时候需要重新添加虚拟设备。</font>

![img55](img55.png)

②模板管理

- 设备升级为2.0后对应的模板也要修改为2.0。进入二级域名==>组态管理==>模板管理==>点击需要编辑的模板
  <font color=red size=3>注：当设备绑定时候无法修改需要先解绑，然后再编辑。</font>

![img56](img56.png)

![img56](img57.png)

③模板数据

- 有1.0转换至2.0后，设备数据做了改变。原来的数据已经不能显示了。需要在模板中重新绑定数据，以确保您的云组态能正常显示数据。点击替换按钮，选择对应的设备SN号后点击确定；如果部分没有替换成功，双击控件，在一般==>数据项点击选择。

![img58](img58.png)



![img59](img59.png)

④非标模板的转换

非标模板从1.0升到2.0。第一步与标准模板一样，点击编辑修改设备版本即可。第二步针对非标模板数据。在使用上较大的区别与原有1.0设备，需要特别注意。非标模板需要设置模板数据源。由于非标模板灵活度极高，具体使用可以查看使用说明，这里不再赘述。

![img60](img60.png)

### 使用Unimatiot域名平台即老平台的迁移

老平台的迁移至二级域名平台，设备可以直接再虚拟设备添加。但是模板迁移需要联系当地技术或销售来进行迁移操作。

## 查询流量卡信息

### 通过网址查看

- 浏览器进入网址（https://www.gongyeyuniot.com/dev/FlowChargeSearch）

  ![image-20230203144156189](image-20230203144156189.png)

- 输入卡号后点击查询。

  已用流量：当前套餐已使用的流量

  剩余流量：当前套餐剩余流量

  额定流量：当前订购套餐内的总流量

  ![image-20230203144211905](image-20230203144211905.png)

<font color=red size=3>输入卡号如果查询不出来，检查试下是否前后有多余的空格。如果卡号确认没有输入错，可能不是我们公司的流量卡或者流量卡已销户</font>

### 通过手机查看

- 通过手机浏览器扫码二维码，操作步骤：输入卡号后点击查询，如上

  ![image-20230203144716248](image-20230203144716248.png)

  如果用微信扫码，需要用浏览器打开

  ![image-20230203144737354](image-20230203144737354.png)

  ### 通过anyaccess查看

  - 设备管理平台绑定流量卡后，可以在基本配置==>基本信息里面查看到流量卡信息

    ![image-20230203145036955](image-20230203145036955.png)

  - 绑定卡号操作步骤：选中设备==>>基本配置==>>流量信息==>>流量卡绑定==>>输入卡号（卡号只用输入前20位）和验证码，绑定成功后，可以看到流量卡信息<font color=red size=3>(停机、销户的卡或者不是我们公司的卡无法绑定)</font>

![image-20230203145047637](image-20230203145047637.png)

![image-20230203145059613](image-20230203145059613.png)

## Proface远程下载时失败，提示传输失败

- 开启透传后，能ping通触摸屏的IP地址，但是下载时提示错误

- 默认的PASV是不勾选的，需要勾选上再进行下载,测试发现第一次下载成功后，再次下载不要勾选也可以下载了。

- 因为触摸屏本身是21端口号比较特殊，所以要选择被动链接，关于21端口号详细解释可以看一下这个网站https://baijiahao.baidu.com/s?id=1740033743788284825&wfr=spider&for=pc

  ![image-20230203145357032](image-20230203145357032.png)

  ![image-20230203145414440](image-20230203145414440.png)

